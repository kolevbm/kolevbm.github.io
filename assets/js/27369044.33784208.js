"use strict";(self.webpackChunktaking_notes=self.webpackChunktaking_notes||[]).push([[8502],{6783:(e,r,i)=>{i.r(r),i.d(r,{assets:()=>a,contentTitle:()=>c,default:()=>u,frontMatter:()=>t,metadata:()=>l,toc:()=>d});var n=i(4848),s=i(8453);const t={sidebar_label:"Alpine linux",displayed_sidebar:"linuxSidebar"},c="Alpine linux",l={id:"linux/Alpine",title:"Alpine linux",description:"running a service",source:"@site/docs/linux/Alpine.mdx",sourceDirName:"linux",slug:"/linux/Alpine",permalink:"/docs/linux/Alpine",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{sidebar_label:"Alpine linux",displayed_sidebar:"linuxSidebar"},sidebar:"linuxSidebar",previous:{title:"SSH keys",permalink:"/docs/linux/ssh"},next:{title:"TODO",permalink:"/docs/linux/todo"}},a={},d=[{value:"running a service",id:"running-a-service",level:2},{value:"1.Create the service script:",id:"1create-the-service-script",level:3},{value:"2.Edit the service script",id:"2edit-the-service-script",level:3},{value:"3. Make sure it is executable",id:"3-make-sure-it-is-executable",level:3},{value:"4.  Add the service to the default runlevel:",id:"4--add-the-service-to-the-default-runlevel",level:3},{value:"5. Start the service manually:",id:"5-start-the-service-manually",level:3},{value:"6. Check the status of the service:",id:"6-check-the-status-of-the-service",level:3},{value:"7. Stop the service:",id:"7-stop-the-service",level:3}];function o(e){const r={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.header,{children:(0,n.jsx)(r.h1,{id:"alpine-linux",children:"Alpine linux"})}),"\n",(0,n.jsx)(r.h2,{id:"running-a-service",children:"running a service"}),"\n",(0,n.jsx)(r.h3,{id:"1create-the-service-script",children:"1.Create the service script:"}),"\n",(0,n.jsx)(r.p,{children:"OpenRC service scripts are located in /etc/init.d/. Each service needs its own script.\r\nCreate a new script for your service and make it executable:"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-bash",metastring:'title="create service script"',children:"sudo touch /etc/init.d/myservice\r\nsudo chmod +x /etc/init.d/myservice\n"})}),"\n",(0,n.jsx)(r.h3,{id:"2edit-the-service-script",children:"2.Edit the service script"}),"\n",(0,n.jsx)(r.p,{children:"Edit the service script with your service's details:"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-bash",metastring:'title="edit service script"',children:"sudo nano /etc/init.d/myservice\n"})}),"\n",(0,n.jsx)(r.p,{children:"Basic service script template:"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-bash",metastring:'title="service script"',children:'#!/sbin/openrc-run\r\n\r\nname="remioWeb"\r\ndescription="Remio docs Web server"\r\n\r\ndirectory="/home/boris/remioWebDocs/remioWebDocs"\r\n\r\npidfile="/run/${RC_SVCNAME}.pid"\r\ncommand="/usr/bin/node"  # Path to your daemon or service executable\r\ncommand_args="/home/boris/remioWebDocs/remioWebDocs/node_modules/.bin/docusaurus serve --port 80 --host 0.0.0.0" # Arguments to pass to the command\r\n\r\n\r\n\r\ncommand_background="yes"\r\n\r\noutput_log="/var/log/remioWeb.log"\r\nerror_log="/var/log/remioWeb_error.log"\r\n\r\ndepend() {\r\n\r\n want net\r\n}\n'})}),"\n",(0,n.jsxs)(r.admonition,{type:"info",children:[(0,n.jsxs)(r.p,{children:["in this example we are using ",(0,n.jsx)(r.code,{children:"nodejs"})," and ",(0,n.jsx)(r.code,{children:"docusaurus"})," to serve the docs its like running: ",(0,n.jsx)(r.code,{children:"node /home/boris/remioWebDocs/remioWebDocs/node_modules/.bin/docusaurus serve --port 80 --host 0.0.0.0"})]}),(0,n.jsxs)(r.p,{children:["in general you will run: ",(0,n.jsx)(r.code,{children:"npm run serve -- --build --port 80 --host 0.0.0.0"})," if you are in the root of the project, but ",(0,n.jsx)(r.code,{children:"node"})," will be a child process of ",(0,n.jsx)(r.code,{children:"npm"})," and the ",(0,n.jsx)(r.code,{children:"openrc"})," will not be able to kill the process"]})]}),"\n",(0,n.jsx)(r.h3,{id:"3-make-sure-it-is-executable",children:"3. Make sure it is executable"}),"\n",(0,n.jsx)(r.p,{children:"After editing, ensure the script is executable:"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-bash",metastring:'title="make executable"',children:"\r\nsudo chmod +x /etc/init.d/myservice\n"})}),"\n",(0,n.jsx)(r.h3,{id:"4--add-the-service-to-the-default-runlevel",children:"4.  Add the service to the default runlevel:"}),"\n",(0,n.jsx)(r.p,{children:"To ensure the service starts automatically on boot, add it to the default runlevel:"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-bash",metastring:'title="add to default runlevel"',children:"sudo rc-update add myservice default\n"})}),"\n",(0,n.jsx)(r.h3,{id:"5-start-the-service-manually",children:"5. Start the service manually:"}),"\n",(0,n.jsx)(r.p,{children:"You can start the service manually to test it:"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-bash",metastring:'title="start service"',children:"sudo rc-service myservice start\n"})}),"\n",(0,n.jsx)(r.h3,{id:"6-check-the-status-of-the-service",children:"6. Check the status of the service:"}),"\n",(0,n.jsx)(r.p,{children:"To check if the service is running, use:"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-bash",metastring:'title="check status"  ',children:"sudo rc-service myservice status\n"})}),"\n",(0,n.jsx)(r.h3,{id:"7-stop-the-service",children:"7. Stop the service:"}),"\n",(0,n.jsx)(r.p,{children:"To stop the service, use:"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-bash",metastring:'title="stop service"',children:"sudo rc-service myservice stop\n"})})]})}function u(e={}){const{wrapper:r}={...(0,s.R)(),...e.components};return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(o,{...e})}):o(e)}},8453:(e,r,i)=>{i.d(r,{R:()=>c,x:()=>l});var n=i(6540);const s={},t=n.createContext(s);function c(e){const r=n.useContext(t);return n.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),n.createElement(t.Provider,{value:r},e.children)}}}]);