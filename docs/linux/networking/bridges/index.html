<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-linux/networking/bridges" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Notes on Linux Bridges | BK`s notes</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://kolevbm.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://kolevbm.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://kolevbm.github.io/docs/linux/networking/bridges"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Notes on Linux Bridges | BK`s notes"><meta data-rh="true" name="description" content="Here we will create a temporary bridge between two ethernet ports with iproute2 package (ip a show commands) and then make the same thing, but this time permanent with nmcli as a the /etc/network/interfaces method is a legacy one. Anyway an example with it will be shown."><meta data-rh="true" property="og:description" content="Here we will create a temporary bridge between two ethernet ports with iproute2 package (ip a show commands) and then make the same thing, but this time permanent with nmcli as a the /etc/network/interfaces method is a legacy one. Anyway an example with it will be shown."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://kolevbm.github.io/docs/linux/networking/bridges"><link data-rh="true" rel="alternate" href="https://kolevbm.github.io/docs/linux/networking/bridges" hreflang="en"><link data-rh="true" rel="alternate" href="https://kolevbm.github.io/docs/linux/networking/bridges" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Networking","item":"https://kolevbm.github.io/docs/category/networking"},{"@type":"ListItem","position":2,"name":"Bridges","item":"https://kolevbm.github.io/docs/linux/networking/bridges"}]}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="BK`s notes RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="BK`s notes Atom Feed">




<link rel="icon" href="/img/docusaurus.png">
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="rgb(37, 194, 160)"><link rel="stylesheet" href="/assets/css/styles.9ae7b72c.css">
<script src="/assets/js/runtime~main.d6b3772a.js" defer="defer"></script>
<script src="/assets/js/main.1a54b63d.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/favicon.ico" alt="BK Notes Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/favicon.ico" alt="BK Notes Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Notes</b></a><a class="navbar__item navbar__link" href="/docs/espressif/Intro">Espressif</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/linux/folder_structure">Linux</a><a class="navbar__item navbar__link" href="/docs/mikrotik/dhcp-server/">MikroTik</a><a class="navbar__item navbar__link" href="/docs/docker/docker_basics">Docker</a><a class="navbar__item navbar__link" href="/docs/regEx/">RegEx</a><a class="navbar__item navbar__link" href="/docs/nvidia/kernel">Nvidia</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/blog">Blog</a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/linux/folder_structure">Filesystem Hierarchy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/linux/processes">Processes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/linux/terminal_basics">Basic commands</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/linux/users">User management</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/linux/ssh">SSH keys</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/linux/WSL">WSL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/linux/alias">Aliases</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/alpine">Alpine</a><button aria-label="Expand sidebar category &#x27;Alpine&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/linux/canbus/">CAN Bus</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/linux/find">Find</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/logrotate">Logrotate</a><button aria-label="Expand sidebar category &#x27;Logrotate&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/category/networking">Networking</a><button aria-label="Collapse sidebar category &#x27;Networking&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/linux/networking/basics">Basics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/linux/networking/bridges">Bridges</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/linux/networking/iptables">Iptables</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/permissions">Permissions</a><button aria-label="Expand sidebar category &#x27;Permissions&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/linux/todo">TODO</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/category/networking"><span>Networking</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Bridges</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Notes on Linux Bridges</h1></header>
<p>Here we will create a temporary bridge between two ethernet ports with <code>iproute2</code> package (<code>ip a show</code> commands) and then make the same thing, but this time permanent with <code>nmcli</code> as a the <code>/etc/network/interfaces</code> method is a legacy one. Anyway an example with it will be shown.
Just have in mind that if a <code>nmcli</code>/<code>nmtui</code> is installed the recomended way is to do it with Network Manager package - <code>nmcli</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="hardware">Hardware:<a href="#hardware" class="hash-link" aria-label="Direct link to Hardware:" title="Direct link to Hardware:">​</a></h2>
<ul>
<li>
<p>RADXA E54C network computer</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">uname -a</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Linux radxa-e54c </span><span class="token number" style="color:#36acaa">6.1</span><span class="token plain">.84-6-rk2410 </span><span class="token comment" style="color:#999988;font-style:italic">#6 SMP Fri Apr 18 09:22:57 UTC 2025 aarch64 GNU/Linux</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">/etc/os-release</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">PRETTY_NAME</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;Debian GNU/Linux 12 (bookworm)&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">NAME</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;Debian GNU/Linux&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">VERSION_ID</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;12&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">VERSION</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;12 (bookworm)&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">VERSION_CODENAME</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">bookworm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">ID</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">debian</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">HOME_URL</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;https://www.debian.org/&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">SUPPORT_URL</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;https://www.debian.org/support&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">BUG_REPORT_URL</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;https://bugs.debian.org/&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
</li>
<li>
<p>Luckfox Pico pro/Max</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">uname -a</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Linux luckfox-bk </span><span class="token number" style="color:#36acaa">5.10</span><span class="token plain">.160 </span><span class="token comment" style="color:#999988;font-style:italic">#1 Wed Jun 11 05:45:55 EEST 2025 armv7l GNU/Linux</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">/etc/os-release</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">NAME</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">Buildroot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">VERSION</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">-gd2da6f0f4-dirty</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">ID</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">buildroot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">VERSION_ID</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">2023.02</span><span class="token plain">.6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">PRETTY_NAME</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;Buildroot 2023.02.6&quot;</span><br></span></code></pre></div></div>
</li>
<li>
<p>Windows PC with WiFi and Ethernet adapter</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="network-overview">Network Overview:<a href="#network-overview" class="hash-link" aria-label="Direct link to Network Overview:" title="Direct link to Network Overview:">​</a></h2>
<table><thead><tr><th style="text-align:center">radxa</th><th style="text-align:center">windows</th><th style="text-align:center">luckfox</th><th style="text-align:center">internet</th></tr></thead><tbody><tr><td style="text-align:center">WAN</td><td style="text-align:center">-</td><td style="text-align:center">-</td><td style="text-align:center">-</td></tr><tr><td style="text-align:center">LAN1</td><td style="text-align:center">-</td><td style="text-align:center">-</td><td style="text-align:center">-</td></tr><tr><td style="text-align:center">LAN2</td><td style="text-align:center">ETH3</td><td style="text-align:center">-</td><td style="text-align:center">-</td></tr><tr><td style="text-align:center">LAN3</td><td style="text-align:center">-</td><td style="text-align:center">ETH0</td><td style="text-align:center">-</td></tr><tr><td style="text-align:center">USBDebug</td><td style="text-align:center">USB</td><td style="text-align:center">-</td><td style="text-align:center">-</td></tr><tr><td style="text-align:center">-</td><td style="text-align:center">ETH4</td><td style="text-align:center">USB RNDIS</td><td style="text-align:center">-</td></tr><tr><td style="text-align:center">-</td><td style="text-align:center">Wi-Fi</td><td style="text-align:center">-</td><td style="text-align:center">Wi-Fi Network</td></tr></tbody></table>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">┌──────────┬────────────┬────────────┬──────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  Radxa   │  Windows   │  Luckfox   │  Internet    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├──────────┼────────────┼────────────┼──────────────┤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ WAN      │            │            │              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ LAN1     │            │            │              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ LAN2─────┼─ETH3       │            │              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ LAN3─────┼────────────┼─ETH0       │              |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ USBDebug─┼─USB        │            │              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│          │ ETH4───────┼─USB RNDIS  │              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│          │ Wi-Fi──────┼────────────┼─Wi-Fi Network│</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└──────────┴────────────┴────────────┴──────────────┘</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="notes">Notes:<a href="#notes" class="hash-link" aria-label="Direct link to Notes:" title="Direct link to Notes:">​</a></h2>
<ul>
<li>Bridges are like switches, they operate at Layer 2 of the OSI model, they use MAC addresses.</li>
<li>Routers operate at layer 3 IP addresses</li>
</ul>
<p>That means devices connected to a bridge for example <code>eth1</code> deviceA and <code>eth2</code> deviceB will be able to communicate, <strong>if they are on the same network</strong>.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">deviceA Windows Machine</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ip: 172.16.1.10/24</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deviceB Luckfox Pico Pro/Max</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ip: 172.16.1.20/24</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Clarification on CIDR notation</div><div class="admonitionContent_BuS1"><p>10.10.10.0/24 is the network<br>
<!-- -->10.10.10.1/24 is the address</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="tasks">Tasks:<a href="#tasks" class="hash-link" aria-label="Direct link to Tasks:" title="Direct link to Tasks:">​</a></h2>
<ol start="0">
<li>
<p><a href="#0-prepare-devices">Prepare devices</a></p>
<ul>
<li>DeviceA, Windows Machine</li>
<li>DeviceB, Luckfox</li>
</ul>
</li>
<li>
<p><a href="#1-create-bridge-on-the-host-device-between-eth1-and-eth2-call-it-br0">Create bridge on the host device between <code>eth1</code> and <code>eth2</code> (br0)</a></p>
</li>
<li>
<p><a href="#2-connect-devicea-to-eth1-and-deviceb-to-eht2-set-static-ips-in-network-172161024">Connect deviceA to <code>eth1</code> and deviceB to <code>eth2</code>, set static IPs</a></p>
<ul>
<li>Checks</li>
</ul>
</li>
<li>
<p><a href="#3-set-an-ip-address-of-the-bridge-br0-so-we-can-have-access-to-both-devices-from-the-host">Set an IP address for the bridge <code>br0</code></a></p>
<ul>
<li>Checks</li>
</ul>
</li>
<li>
<p><a href="#4-make-things-permanent-with-legacy-config">Make things permanent legacy</a></p>
</li>
<li>
<p><a href="#5-make-things-permanent-with-NetworkManager">Make things permanent nmcli</a></p>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="0-prepare-devices">0. Prepare devices<a href="#0-prepare-devices" class="hash-link" aria-label="Direct link to 0. Prepare devices" title="Direct link to 0. Prepare devices">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="radxa">RADXA<a href="#radxa" class="hash-link" aria-label="Direct link to RADXA" title="Direct link to RADXA">​</a></h4>
<ol>
<li>
<p>Installing the needed packages</p>
<p>1.1 Make sure you have internet connection</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>sharing internet from Windows PC via Wi-Fi to Ethernet</div><div class="admonitionContent_BuS1"><p>Go to WiFi adapter properties/Sharing/internetConnection sharing, mark the checkbox and select the network adapter to share with <br>
<!-- -->Note the IP will be changed to <code>192.168.137.1</code> and a DHCP server will be active on this port, so make sure the RADXA ETH port is set to automatic ip address</p></div></div>
<p>1.2 Connect to the radxa via the USBDebug with putty and change the IP addres:</p>
<ul>
<li>Open PuTTY and configure as follows:</li>
<li>Select Serial for connection type</li>
<li>Enter the COM port number in the Serial line field (check in device manager)</li>
<li>Set Speed to <code>1500000</code></li>
<li>Select Serial for Connection type</li>
</ul>
<p>when connected use the already installed <code>nmtui</code> package to change the LAN2 adapter to automatic dhcp client <br>
<!-- -->then get the ip of the radxa</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">ip</span><span class="token plain"> a show</span><br></span></code></pre></div></div>
<p>1.3 update package list</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt</span><span class="token plain"> update</span><br></span></code></pre></div></div>
<p>1.4 search for the package, if already installed skip <code>apt install bridge-utils</code></p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>bridge-utils obsolete</div><div class="admonitionContent_BuS1"><p>bridge-utils is obolete it is included in the iproute2 package and we will use iproute2 in the next steps</p></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> radxa@radxa-e54c:~$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt</span><span class="token plain"> search bridge-utils</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Sorting</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">. Done</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Full Text Search</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">. Done</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> bridge-utils/stable,now </span><span class="token number" style="color:#36acaa">1.7</span><span class="token plain">.1-1 arm64 </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">installed</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Utilities </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> configuring the Linux Ethernet bridge</span><br></span></code></pre></div></div>
<!-- -->
</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="devicea-windows-machine">DeviceA, Windows Machine<a href="#devicea-windows-machine" class="hash-link" aria-label="Direct link to DeviceA, Windows Machine" title="Direct link to DeviceA, Windows Machine">​</a></h4>
<ol>
<li>Go to Network Connections &gt; <code>Win+R</code> type <code>ncpa.cpl</code> remove the sharing from the WiFi and set the ip address of the Ethernet Adapter connected to the Radxa to <code>172.16.1.10/24</code></li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="deviceb-luckfox">DeviceB, Luckfox<a href="#deviceb-luckfox" class="hash-link" aria-label="Direct link to DeviceB, Luckfox" title="Direct link to DeviceB, Luckfox">​</a></h4>
<ol>
<li>
<p><a href="https://wiki.luckfox.com/Luckfox-Pico/Luckfox-Pico-RV1106/Luckfox-Pico-Pro-Max/Luckfox-Pico-Flash-burn-image" target="_blank" rel="noopener noreferrer">Install the buildroot OS on the spi flash</a></p>
</li>
<li>
<p><a href="https://wiki.luckfox.com/Luckfox-Pico/Luckfox-Pico-RV1106/Luckfox-Pico-Pro-Max/SSH-Telnet-Login" target="_blank" rel="noopener noreferrer">Connect to it via the USB interface</a></p>
<blockquote>
<p>When connecting Luckfox to the usb a virtual network port on the windows machine will be created<br>
<!-- -->USB virtual dongles have a <strong>static</strong> IP address of <strong>172.32.0.93</strong> Before using it, you need to set up the RNDIS virtual network port.<br>
<!-- -->Look for a Network Adapter with something like <strong><em>Remote NDIS based internet Sharing Device</em></strong> in the Network Connections.<br>
<!-- -->Change the address of the windows Network Adapter to: <br>
<!-- -->IP address: 172.32.0.100 <br>
<!-- -->subnet mask: 255.255.0.0</p>
</blockquote>
</li>
<li>
<p>Create a script in <code>/etc/init.d</code> check <a href="https://wiki.luckfox.com/Luckfox-Pico/Luckfox-Pico-RV1103/Luckfox-Pico-Plus-Mini/Luckfox-Pico-Autostart" target="_blank" rel="noopener noreferrer">this</a> out <br>
<!-- -->Why? <br>
<!-- -->Buildroot with BusyBox init follows SysV-style init scripts for boot-time actions, hence changing /etc/network/interfaces won&#x27;t work. <br>
<!-- -->It runs at boot because BusyBox init uses <code>/etc/inittab</code> → runs <code>/etc/init.d/rcS</code> → runs all S* scripts.</p>
<p>3.1. Luckfox buildroot image is using <a href="https://www.busybox.net/downloads/BusyBox.html" target="_blank" rel="noopener noreferrer">BusyBox</a> - The Swiss Army Knife of Embedded Linux\</p>
<p>Create a startup script to wait 50 sec for dhcp server else set a static ip address</p>
<ul>
<li>adjust the priority of system scripts</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">/etc/init.d</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">mv</span><span class="token plain"> S99usb0config S90usb0config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">mv</span><span class="token plain"> S99_auto_reboot S90_auto_reboot</span><br></span></code></pre></div></div>
<ul>
<li>create a script <code>vi etc/init.d/S99_static_ip</code></li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">/etc/init.d/S99_static_ip</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token shebang important">#!/bin/sh</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;### Static IP script ###&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">MAX_RETRIES</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">TRIES</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">USER_IP</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">172.16</span><span class="token plain">.1.20/24</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function-name function" style="color:#d73a49">check_ip_address</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ip</span><span class="token plain"> a show eth0 </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-q</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;inet&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">then</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;inet found&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token builtin class-name">return</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;inet not found&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token builtin class-name">return</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">fi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># check if we have ip by DHCP</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function-name function" style="color:#d73a49">wait_dhcp</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$TRIES</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-lt</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$MAX_RETRIES</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> check_ip_address </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">then</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;DHCP succeed!&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token builtin class-name">exit</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">$((</span><span class="token string variable" style="color:#36acaa">TRIES </span><span class="token string variable operator" style="color:#393A34">+</span><span class="token string variable" style="color:#36acaa"> </span><span class="token string variable number" style="color:#36acaa">1</span><span class="token string variable" style="color:#36acaa">))</span><span class="token string" style="color:#e3116c">/</span><span class="token string variable" style="color:#36acaa">$MAX_RETRIES</span><span class="token string" style="color:#e3116c"> wait for DHCP IP...&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token assign-left variable" style="color:#36acaa">TRIES</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$((</span><span class="token variable" style="color:#36acaa">TRIES </span><span class="token variable operator" style="color:#393A34">+</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable number" style="color:#36acaa">1</span><span class="token variable" style="color:#36acaa">))</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token function" style="color:#d73a49">sleep</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token keyword" style="color:#00009f">fi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">done</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># set static IP</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function-name function" style="color:#d73a49">set_static_ip</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;giving static IP </span><span class="token string variable" style="color:#36acaa">$USER_IP</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">ip</span><span class="token plain"> addr </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$USER_IP</span><span class="token plain"> dev eth0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">ip</span><span class="token plain"> a show dev eth0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$1</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">check</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     check_ip_address</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token punctuation" style="color:#393A34">;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">start</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;start&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     wait_dhcp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     set_static_ip</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token punctuation" style="color:#393A34">;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">stop</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;stop&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token punctuation" style="color:#393A34">;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token builtin class-name">exit</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token punctuation" style="color:#393A34">;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">esac</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<ul>
<li>make the script executable</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">chmod</span><span class="token plain"> +x /etc/init.d/S99_static_ip</span><br></span></code></pre></div></div>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-create-bridge-on-the-host-device-radxa-between-lan2-and-lan3-call-it-br0">1. Create bridge on the host device (RADXA) between <code>lan2</code> and <code>lan3</code> call it <code>br0</code><a href="#1-create-bridge-on-the-host-device-radxa-between-lan2-and-lan3-call-it-br0" class="hash-link" aria-label="Direct link to 1-create-bridge-on-the-host-device-radxa-between-lan2-and-lan3-call-it-br0" title="Direct link to 1-create-bridge-on-the-host-device-radxa-between-lan2-and-lan3-call-it-br0">​</a></h3>
<p>While connected with PuTTY</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">add bridge device</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ip</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">link</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> name br0 </span><span class="token builtin class-name">type</span><span class="token plain"> bridge</span><br></span></code></pre></div></div>
<blockquote>
<p>see <code>man ip-link(8)</code></p>
</blockquote>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">turn interfaces down</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ip</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">link</span><span class="token plain"> </span><span class="token builtin class-name">set</span><span class="token plain"> lan2 down</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ip</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">link</span><span class="token plain"> </span><span class="token builtin class-name">set</span><span class="token plain"> lan3 down</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">add interfaces to the bridge</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ip</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">link</span><span class="token plain"> </span><span class="token builtin class-name">set</span><span class="token plain"> lan2 master br0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ip</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">link</span><span class="token plain"> </span><span class="token builtin class-name">set</span><span class="token plain"> lan3 master br0</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">check interfaces</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">radxa@radxa-e54c:~$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ip</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">link</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">1</span><span class="token plain">: lo: </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">LOOPBACK,UP,LOWER_UP</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> mtu </span><span class="token number" style="color:#36acaa">65536</span><span class="token plain"> qdisc noqueue state UNKNOWN mode DEFAULT group default qlen </span><span class="token number" style="color:#36acaa">1000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">2</span><span class="token plain">: end1: </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">BROADCAST,MULTICAST,UP,LOWER_UP</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> mtu </span><span class="token number" style="color:#36acaa">1508</span><span class="token plain"> qdisc mq state UP mode DEFAULT group default qlen </span><span class="token number" style="color:#36acaa">1000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    link/ether </span><span class="token number" style="color:#36acaa">46</span><span class="token plain">:ed:77:9f:2f:81 brd ff:ff:ff:ff:ff:ff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">3</span><span class="token plain">: lan3@end1: </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">BROADCAST,MULTICAST</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> mtu </span><span class="token number" style="color:#36acaa">1500</span><span class="token plain"> qdisc noqueue master br0 state DOWN mode DEFAULT group default qlen </span><span class="token number" style="color:#36acaa">1000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    link/ether 00:48:54:20:00:03 brd ff:ff:ff:ff:ff:ff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">4</span><span class="token plain">: lan2@end1: </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">BROADCAST,MULTICAST</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> mtu </span><span class="token number" style="color:#36acaa">1500</span><span class="token plain"> qdisc noqueue master br0 state DOWN mode DEFAULT group default qlen </span><span class="token number" style="color:#36acaa">1000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    link/ether 00:48:54:20:00:02 brd ff:ff:ff:ff:ff:ff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">5</span><span class="token plain">: lan1@end1: </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">BROADCAST,MULTICAST</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> mtu </span><span class="token number" style="color:#36acaa">1500</span><span class="token plain"> qdisc noqueue state DOWN mode DEFAULT group default qlen </span><span class="token number" style="color:#36acaa">1000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    link/ether 00:48:54:20:00:01 brd ff:ff:ff:ff:ff:ff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">6</span><span class="token plain">: wan@end1: </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">NO-CARRIER,BROADCAST,MULTICAST,UP</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> mtu </span><span class="token number" style="color:#36acaa">1500</span><span class="token plain"> qdisc noqueue state LOWERLAYERDOWN mode DEFAULT group default qlen </span><span class="token number" style="color:#36acaa">1000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    link/ether 00:48:54:20:00:00 brd ff:ff:ff:ff:ff:ff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">7</span><span class="token plain">: br0: </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">BROADCAST,MULTICAST</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> mtu </span><span class="token number" style="color:#36acaa">1500</span><span class="token plain"> qdisc noqueue state DOWN mode DEFAULT group default qlen </span><span class="token number" style="color:#36acaa">1000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    link/ether ba:37:11:86:dd:71 brd ff:ff:ff:ff:ff:ff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<p>We can see that <code>3: lan3</code> and <code>4: lan2</code> are with master <code>7: br0</code> <br>
<!-- -->Another way is to check with <code>bridge</code> command:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">check bridged interfaces</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">radxa@radxa-e54c:~$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> bridge </span><span class="token function" style="color:#d73a49">link</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">3</span><span class="token plain">: lan3@end1: </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">BROADCAST,MULTICAST</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> mtu </span><span class="token number" style="color:#36acaa">1500</span><span class="token plain"> master br0 state disabled priority </span><span class="token number" style="color:#36acaa">32</span><span class="token plain"> cost </span><span class="token number" style="color:#36acaa">19</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">4</span><span class="token plain">: lan2@end1: </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">BROADCAST,MULTICAST</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> mtu </span><span class="token number" style="color:#36acaa">1500</span><span class="token plain"> master br0 state disabled priority </span><span class="token number" style="color:#36acaa">32</span><span class="token plain"> cost </span><span class="token number" style="color:#36acaa">19</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">bring interfaces up</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ip</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">link</span><span class="token plain"> </span><span class="token builtin class-name">set</span><span class="token plain"> lan2 up</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ip</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">link</span><span class="token plain"> </span><span class="token builtin class-name">set</span><span class="token plain"> lan3 up</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ip</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">link</span><span class="token plain"> </span><span class="token builtin class-name">set</span><span class="token plain"> br0 up</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-connect-devicea-to-eth1-and-deviceb-to-eht2-set-static-ips-in-network-172161024">2. Connect deviceA to <code>eth1</code> and deviceB to <code>eht2</code> set static IPs in network 172.16.1.0/24<a href="#2-connect-devicea-to-eth1-and-deviceb-to-eht2-set-static-ips-in-network-172161024" class="hash-link" aria-label="Direct link to 2-connect-devicea-to-eth1-and-deviceb-to-eht2-set-static-ips-in-network-172161024" title="Direct link to 2-connect-devicea-to-eth1-and-deviceb-to-eht2-set-static-ips-in-network-172161024">​</a></h3>
<p>At this step we have already configured the adresses of the luckfox <code>172.16.1.20/24</code> and the windows PC <code>172.16.1.10/24</code>, time to check the bridge</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="checks">Checks<a href="#checks" class="hash-link" aria-label="Direct link to Checks" title="Direct link to Checks">​</a></h4>
<ol>
<li>Check connectivity from deviceA to deviceB and vice versa</li>
</ol>
<div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">windows PC -&gt; luckfox</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">PS</span><span class="token plain"> C:\Users\kolev&gt; ping  172</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">16</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">20</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Pinging 172</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">16</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">20 with 32 bytes of </span><span class="token keyword" style="color:#00009f">data</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Reply </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> 172</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">16</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">20: bytes=32 time=2ms TTL=64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Reply </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> 172</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">16</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">20: bytes=32 time=2ms TTL=64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Reply </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> 172</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">16</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">20: bytes=32 time=2ms TTL=64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Reply </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> 172</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">16</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">20: bytes=32 time=2ms TTL=64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Ping statistics </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> 172</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">16</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">20:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Packets: Sent = 4</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Received = 4</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Lost = 0 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">0% loss</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Approximate round trip times in milli-seconds:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Minimum = 2ms</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Maximum = 2ms</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Average = 2ms</span><br></span></code></pre></div></div>
<p>Using the virtual network with RNDIS connection coonect from pc to luckfox <code>root@172.32.0.93</code> and chek the <code>luckfox eth0</code> interface connection</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">luckfox -&gt; windows PC</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@luckfox-bk root</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># ping 172.16.1.10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PING </span><span class="token number" style="color:#36acaa">172.16</span><span class="token plain">.1.10 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">172.16</span><span class="token plain">.1.10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">: </span><span class="token number" style="color:#36acaa">56</span><span class="token plain"> data bytes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">64</span><span class="token plain"> bytes from </span><span class="token number" style="color:#36acaa">172.16</span><span class="token plain">.1.10: </span><span class="token assign-left variable" style="color:#36acaa">seq</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">ttl</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">128</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">time</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">2.769</span><span class="token plain"> ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">64</span><span class="token plain"> bytes from </span><span class="token number" style="color:#36acaa">172.16</span><span class="token plain">.1.10: </span><span class="token assign-left variable" style="color:#36acaa">seq</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">ttl</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">128</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">time</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">2.822</span><span class="token plain"> ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">64</span><span class="token plain"> bytes from </span><span class="token number" style="color:#36acaa">172.16</span><span class="token plain">.1.10: </span><span class="token assign-left variable" style="color:#36acaa">seq</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">ttl</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">128</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">time</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">3.113</span><span class="token plain"> ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">64</span><span class="token plain"> bytes from </span><span class="token number" style="color:#36acaa">172.16</span><span class="token plain">.1.10: </span><span class="token assign-left variable" style="color:#36acaa">seq</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">ttl</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">128</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">time</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">2.698</span><span class="token plain"> ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">64</span><span class="token plain"> bytes from </span><span class="token number" style="color:#36acaa">172.16</span><span class="token plain">.1.10: </span><span class="token assign-left variable" style="color:#36acaa">seq</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">4</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">ttl</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">128</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">time</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">2.893</span><span class="token plain"> ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">64</span><span class="token plain"> bytes from </span><span class="token number" style="color:#36acaa">172.16</span><span class="token plain">.1.10: </span><span class="token assign-left variable" style="color:#36acaa">seq</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">5</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">ttl</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">128</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">time</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">2.785</span><span class="token plain"> ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">^C</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--- </span><span class="token number" style="color:#36acaa">172.16</span><span class="token plain">.1.10 </span><span class="token function" style="color:#d73a49">ping</span><span class="token plain"> statistics ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">6</span><span class="token plain"> packets transmitted, </span><span class="token number" style="color:#36acaa">6</span><span class="token plain"> packets received, </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">% packet loss</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">round-trip min/avg/max </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2.698</span><span class="token plain">/2.846/3.113 ms</span><br></span></code></pre></div></div>
<p>Now we can try to log to the luckfox from the address <code>172.16.1.20</code></p>
<div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">login to luckfox through ethernet interface </div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">PS</span><span class="token plain"> C:\Users\kolev&gt; ssh   root@172</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">16</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">20</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The authenticity of host </span><span class="token string" style="color:#e3116c">&#x27;172.16.1.20 (172.16.1.20)&#x27;</span><span class="token plain"> can</span><span class="token string" style="color:#e3116c">&#x27;t be established.</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">ED25519 key fingerprint is SHA256:sGpar00ySOKpakv4SxHZ806d4xRdOeFr/8DyH/YF05I.</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">This host key is known by the following other names/addresses:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    C:\Users\kolev/.ssh/known_hosts:55: 172.32.0.93</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">Are you sure you want to continue connecting (yes/no/[fingerprint])? yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">Warning: Permanently added &#x27;</span><span class="token plain">172</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">16</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">20</span><span class="token string" style="color:#e3116c">&#x27; (ED25519) to the list of known hosts.</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">root@172.16.1.20&#x27;</span><span class="token plain">s password:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token namespace" style="opacity:0.7">[root@luckfox-bk root]</span><span class="token comment" style="color:#999988;font-style:italic"># ip a</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1: lo: &lt;LOOPBACK</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">UP</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">LOWER_UP&gt; mtu 65536 qdisc noqueue qlen 1000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    inet 127</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">0</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">0</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">1/8 scope host lo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       valid_lft forever preferred_lft forever</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2: eth0: &lt;BROADCAST</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">MULTICAST</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">UP</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">LOWER_UP&gt; mtu 1500 qdisc mq qlen 1000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    link/ether fe:39:bd:06:be:63 brd ff:ff:ff:ff:ff:ff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    inet 172</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">16</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">20/24 scope global eth0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       valid_lft forever preferred_lft forever</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3: usb0: &lt;BROADCAST</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">MULTICAST</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">UP</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">LOWER_UP&gt; mtu 1500 qdisc pfifo_fast qlen 1000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    link/ether 36:02:64:2b:3f:8a brd ff:ff:ff:ff:ff:ff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    inet 172</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">32</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">0</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">93/16 brd 172</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">32</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">255</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">255 scope global usb0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       valid_lft forever preferred_lft forever</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-set-an-ip-address-of-the-bridge-br0-so-we-can-have-access-to-both-devices-from-the-host">3. Set an ip address of the bridge br0 so we can have access to both devices from the host<a href="#3-set-an-ip-address-of-the-bridge-br0-so-we-can-have-access-to-both-devices-from-the-host" class="hash-link" aria-label="Direct link to 3. Set an ip address of the bridge br0 so we can have access to both devices from the host" title="Direct link to 3. Set an ip address of the bridge br0 so we can have access to both devices from the host">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">set ip of br0</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ip</span><span class="token plain"> address </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">172.16</span><span class="token plain">.1.1/24 dev br0</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">boris@radxa-e54c:~$ </span><span class="token function" style="color:#d73a49">ip</span><span class="token plain"> a show br0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">7</span><span class="token plain">: br0: </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">BROADCAST,MULTICAST,UP,LOWER_UP</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> mtu </span><span class="token number" style="color:#36acaa">1500</span><span class="token plain"> qdisc noqueue state UP group default qlen </span><span class="token number" style="color:#36acaa">1000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    link/ether ba:37:11:86:dd:71 brd ff:ff:ff:ff:ff:ff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    inet </span><span class="token number" style="color:#36acaa">172.16</span><span class="token plain">.1.1/24 scope global br0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       valid_lft forever preferred_lft forever</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    inet6 fe80::b837:11ff:fe86:dd71/64 scope </span><span class="token function" style="color:#d73a49">link</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       valid_lft forever preferred_lft forever</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="checks-1">Checks<a href="#checks-1" class="hash-link" aria-label="Direct link to Checks" title="Direct link to Checks">​</a></h4>
<ol>
<li>
<p>Check connection to Windows PC from bridge host (radxa) and vice versa</p>
<blockquote>
<p>host bridge (br0) <code>172.16.1.1</code> ping windows machine <code>172.16.1.10</code> <br>
<img decoding="async" loading="lazy" alt="br0-widnows" src="/assets/images/br0-ping-windows-70813ddbbbec6f968d638356254f73f0.png" width="662" height="158" class="img_ev3q"><br>
<!-- -->windows <code>172.16.1.10</code> ping to br0 <code>172.16.1.1</code> <br>
<img decoding="async" loading="lazy" alt="widnows-br0" src="/assets/images/windows-ping-br0-bd1df403008ca397a34184fdc1ca70a6.png" width="493" height="152" class="img_ev3q"></p>
</blockquote>
</li>
<li>
<p>Check connection to luckfox pico from bridge host (radxa) and vice versa</p>
<blockquote>
<p>host bridge (br0) <code>172.16.1.1</code> check ping to luckfox <code>172.16.1.20</code> <br>
<img decoding="async" loading="lazy" alt="bridges-check-ping-luckfox" src="/assets/images/br0-ping-luckfox-40d4cc475e8b7604e0ca68626fa6a60f.png" width="611" height="164" class="img_ev3q"> <br>
<!-- -->luckfox <code>172.16.1.20</code> check ping to br0 <code>172.16.1.1</code> <br>
<img decoding="async" loading="lazy" alt="luckfox-ping-br0" src="/assets/images/luckfox-ping-br0-de000cd9e0b4efe444d6053b78b3ac90.png" width="619" height="228" class="img_ev3q"></p>
</blockquote>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-make-things-permanent-with-legacy-config">4. Make things permanent with legacy config<a href="#4-make-things-permanent-with-legacy-config" class="hash-link" aria-label="Direct link to 4. Make things permanent with legacy config" title="Direct link to 4. Make things permanent with legacy config">​</a></h3>
<p>Edit the file with something similiar</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">/etc/network/interfaces</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Loopback interface</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">auto lo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">iface lo inet loopback</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Define the bridge interface</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">auto br0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">iface br0 inet static</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    address </span><span class="token number" style="color:#36acaa">172.16</span><span class="token plain">.1.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bridge_ports lan2 lan3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bridge_stp off           </span><span class="token comment" style="color:#999988;font-style:italic"># disable spanning tree protocol</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bridge_fd </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">              </span><span class="token comment" style="color:#999988;font-style:italic"># no forwarding delay</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bridge_maxwait </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">         </span><span class="token comment" style="color:#999988;font-style:italic"># no delay before bridge comes up</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>not tested</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="5-make-things-permanent-with-networkmanager">5. Make things permanent with NetworkManager<a href="#5-make-things-permanent-with-networkmanager" class="hash-link" aria-label="Direct link to 5. Make things permanent with NetworkManager" title="Direct link to 5. Make things permanent with NetworkManager">​</a></h3>
<p>All good but with <code>iproute2</code> (commands shown above <code>ip a show</code> etc.) everything is valid until next reboot so we will have to do the whole thing again. This time using the nmcli/nmtui
I preffer the <code>nmcli</code>. So first it is good to reboot the system and start a fresh.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="51-create-a-bridge-br0">5.1 Create a bridge <code>br0</code><a href="#51-create-a-bridge-br0" class="hash-link" aria-label="Direct link to 51-create-a-bridge-br0" title="Direct link to 51-create-a-bridge-br0">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">nmcli create bridge</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">nmcli connection </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> </span><span class="token builtin class-name">type</span><span class="token plain"> bridge autoconnect </span><span class="token function" style="color:#d73a49">yes</span><span class="token plain"> con-name br0 ifname br0</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="52-add-the-connections-lan2-and-lan3-to-the-bridge">5.2 Add the connections <code>lan2</code> and <code>lan3</code> to the bridge<a href="#52-add-the-connections-lan2-and-lan3-to-the-bridge" class="hash-link" aria-label="Direct link to 52-add-the-connections-lan2-and-lan3-to-the-bridge" title="Direct link to 52-add-the-connections-lan2-and-lan3-to-the-bridge">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">nmcli add bridge-slave</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">nmcli connection </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> </span><span class="token builtin class-name">type</span><span class="token plain"> bridge-slave autoconnect </span><span class="token function" style="color:#d73a49">yes</span><span class="token plain"> con-name lan2-br0 ifname lan2 master br0 </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nmcli connection </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> </span><span class="token builtin class-name">type</span><span class="token plain"> bridge-slave autoconnect </span><span class="token function" style="color:#d73a49">yes</span><span class="token plain"> con-name lan3-br0 ifname lan3 master br0</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="53-assign-an-ip-to-the-br0">5.3 Assign an ip to the <code>br0</code><a href="#53-assign-an-ip-to-the-br0" class="hash-link" aria-label="Direct link to 53-assign-an-ip-to-the-br0" title="Direct link to 53-assign-an-ip-to-the-br0">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">nmcli assign IP to br0</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">nmcli connection modify br0 ipv4.addresses </span><span class="token number" style="color:#36acaa">172.16</span><span class="token plain">.1.1/24 </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nmcli connection mofify br0 ipv4.method manual</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="54-bring-everything-up">5.4 Bring everything up<a href="#54-bring-everything-up" class="hash-link" aria-label="Direct link to 5.4 Bring everything up" title="Direct link to 5.4 Bring everything up">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">nmcli connections up</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">nmcli connection up lan2-br0 </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nmcli connection up lan3-br0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nmcli connection up br0</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="55-make-the-tests">5.5 Make the tests<a href="#55-make-the-tests" class="hash-link" aria-label="Direct link to 5.5 Make the tests" title="Direct link to 5.5 Make the tests">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">nmcli connections</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">nmcli connection</span><br></span></code></pre></div></div>
<p>if you see them in green all good
<img decoding="async" loading="lazy" alt="nmcli-connection" src="/assets/images/nmcli-connection-dd11dd2825d52f1e72a6de78fba52c24.png" width="774" height="223" class="img_ev3q"></p>
<p>Feel free to observe other commands of <code>nmcli</code>, you can aslo use the <code>nmtui</code> ternimal user interface which is quite neat but for simple things</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="56-stop-the-bridge">5.6 Stop the bridge<a href="#56-stop-the-bridge" class="hash-link" aria-label="Direct link to 5.6 Stop the bridge" title="Direct link to 5.6 Stop the bridge">​</a></h4>
<p>If you are not happy with the bridge or the configuration you want is now different just make the connection down, and lan2 and lan3 will be separe again with prev. settings</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">connection down</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> nmcli connection down br0</span><br></span></code></pre></div></div>
<p>As you can see devices <code>lan2</code> and <code>lan3</code> are now with names Wired conneciton 3 / Wired connection 4
<img decoding="async" loading="lazy" alt="nmcli-connection-stop" src="/assets/images/nmcli-connecion-stop-679cc37003dca1fa60a74a35d7b8eb93.png" width="752" height="250" class="img_ev3q"></p></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/linux/networking/basics"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Basics</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/linux/networking/iptables"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Iptables</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#hardware" class="table-of-contents__link toc-highlight">Hardware:</a></li><li><a href="#network-overview" class="table-of-contents__link toc-highlight">Network Overview:</a></li><li><a href="#notes" class="table-of-contents__link toc-highlight">Notes:</a></li><li><a href="#tasks" class="table-of-contents__link toc-highlight">Tasks:</a><ul><li><a href="#0-prepare-devices" class="table-of-contents__link toc-highlight">0. Prepare devices</a></li><li><a href="#1-create-bridge-on-the-host-device-radxa-between-lan2-and-lan3-call-it-br0" class="table-of-contents__link toc-highlight">1. Create bridge on the host device (RADXA) between <code>lan2</code> and <code>lan3</code> call it <code>br0</code></a></li><li><a href="#2-connect-devicea-to-eth1-and-deviceb-to-eht2-set-static-ips-in-network-172161024" class="table-of-contents__link toc-highlight">2. Connect deviceA to <code>eth1</code> and deviceB to <code>eht2</code> set static IPs in network 172.16.1.0/24</a></li><li><a href="#3-set-an-ip-address-of-the-bridge-br0-so-we-can-have-access-to-both-devices-from-the-host" class="table-of-contents__link toc-highlight">3. Set an ip address of the bridge br0 so we can have access to both devices from the host</a></li><li><a href="#4-make-things-permanent-with-legacy-config" class="table-of-contents__link toc-highlight">4. Make things permanent with legacy config</a></li><li><a href="#5-make-things-permanent-with-networkmanager" class="table-of-contents__link toc-highlight">5. Make things permanent with NetworkManager</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Boris Kolev</div></div></div></footer></div>
</body>
</html>